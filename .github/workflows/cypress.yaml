name: E2E on Chrome
on: [push]
jobs:
  cypress-run:
    runs-on: ubuntu-latest
    container: cypress/browsers:node14.17.0-chrome88-ff89
    env:
      working-directory: ./frontend
    # let's make sure our tests pass on Chrome browser
    name: E2E on Chrome
    steps:
      - name: checkout
        uses: actions/checkout@v2

      - name: Use Node.js 16.0.0
        uses: actions/setup-node@v3
        with:
          node-version: 16

      - name: Install packages
        run: |
          npm install
        working-directory: ${{ env.working-directory }}

      - uses: cypress-io/github-action@v4
        with:
          working-directory: ${{ env.working-directory }}
          start: npm run start
          browser: chrome
          wait-on: "http://localhost:3000"
